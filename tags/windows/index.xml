<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>windows on Yogendra Rampuria</title><link>https://yogendra.github.io/tags/windows/</link><description>Recent content in windows on Yogendra Rampuria</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright © 2012–2021, Yogendra Rampuria; all rights reserved.</copyright><lastBuildDate>Fri, 10 Jan 2014 10:09:46 +0000</lastBuildDate><atom:link href="https://yogendra.github.io/tags/windows/index.xml" rel="self" type="application/rss+xml"/><item><title>JDK - No Install Needed</title><link>https://yogendra.github.io/2014/01/10/jdk-no-install-needed/</link><pubDate>Fri, 10 Jan 2014 10:09:46 +0000</pubDate><guid>https://yogendra.github.io/2014/01/10/jdk-no-install-needed/</guid><description>
&lt;p>I don&amp;rsquo;t like the whole concept of installers for my development tools like JDK, Eclipse, Netbeans, etc. I just keep a batch/shell script to setup my environment variables for JAVA_HOME, PATH and aliases.&lt;/p>
&lt;p>So, on Windows, updating JDK involves installing new version of JDK and then copying what I need and then uninstall it. I don&amp;rsquo;t like those registry entries and files installed in C:\Windows\System32, etc.&lt;/p>
&lt;p>Recently I read a &lt;a href="https://stackoverflow.com/questions/1619662/where-can-i-get-the-latest-jre-jdk-as-a-zip-file-i-mean-no-exe-installer">stackoverflow entry&lt;/a> that gave some insight on JDK packaging. So I wrote a small batch script to do it all. Only quirk is that, there is a small difference in Pre 7.0 packaging from the 7.0 and above, so for now I need to keep 2 scripts. Scripts need 7z, that is a free tool and could be downloaded from &lt;a href="https://www.7-zip.org/download.html">here&lt;/a>.&lt;/p>
&lt;p>These scripts can be run as:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">jdk-extract path_to_install.exe&amp;lt;/pre&amp;gt;
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;em>or&lt;/em>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">jdk-extract-pre-7.0.bat path_to_installer.bat
&lt;/code>&lt;/pre>&lt;/div>&lt;p>And now on to the actual the code:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">@echo off
REM This script will extract JDK tools from installers, without polluting Windows environment.
REM You need the pristine installers from Oracles website to extract all the data
setlocal
SET CWD&lt;span style="color:#f92672">=&lt;/span>%CD%
SET FILE&lt;span style="color:#f92672">=&lt;/span>%~f1
SET DEST&lt;span style="color:#f92672">=&lt;/span>%~dpn1
echo DEST&lt;span style="color:#f92672">=&lt;/span>%DEST% FILE&lt;span style="color:#f92672">=&lt;/span>%FILE% CWD&lt;span style="color:#f92672">=&lt;/span>%CWD%
md %DEST%
REM Used e here instead of x to keep structure flat
7z e -o&lt;span style="color:#e6db74">&amp;#34;%DEST%&amp;#34;&lt;/span> -y &lt;span style="color:#e6db74">&amp;#34;%FILE%&amp;#34;&lt;/span> tools.zip
cd &lt;span style="color:#e6db74">&amp;#34;%DEST%&amp;#34;&lt;/span>
7z x -y tools.zip
del tools.zip
&lt;span style="color:#66d9ef">for&lt;/span> /r %%x in &lt;span style="color:#f92672">(&lt;/span>*.pack&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">do&lt;/span> call :unpack2000 &lt;span style="color:#e6db74">&amp;#34;%%x&amp;#34;&lt;/span>
cd %CWD%
goto end
:unpack2000
%DEST%&lt;span style="color:#ae81ff">\b&lt;/span>in&lt;span style="color:#ae81ff">\u&lt;/span>npack200 -r %1 &lt;span style="color:#e6db74">&amp;#34;%~dpn1.jar&amp;#34;&lt;/span>
goto:eof
:end
echo Extracted %FILE% to %DEST%
&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">@echo off
REM This script will extract JDK tools from installers, without polluting Windows environment.
REM You need the pristine installers from Oracles website to extract all the data
setlocal
SET CWD&lt;span style="color:#f92672">=&lt;/span>%CD%
SET FILE&lt;span style="color:#f92672">=&lt;/span>%~f1
SET DEST&lt;span style="color:#f92672">=&lt;/span>%~dpn1
echo DEST&lt;span style="color:#f92672">=&lt;/span>%DEST% FILE&lt;span style="color:#f92672">=&lt;/span>%FILE% CWD&lt;span style="color:#f92672">=&lt;/span>%CWD%
md %DEST%
REM Used e here instead of x to keep structure flat
7z e -o&lt;span style="color:#e6db74">&amp;#34;%DEST%&amp;#34;&lt;/span> -y &lt;span style="color:#e6db74">&amp;#34;%FILE%&amp;#34;&lt;/span> .rsrc&lt;span style="color:#ae81ff">\J&lt;/span>AVA_CAB10&lt;span style="color:#ae81ff">\1&lt;/span>&lt;span style="color:#ae81ff">11&lt;/span>
cd &lt;span style="color:#e6db74">&amp;#34;%DEST%&amp;#34;&lt;/span>
extrac32.exe &lt;span style="color:#ae81ff">111&lt;/span>
del &lt;span style="color:#ae81ff">111&lt;/span>
7z x -y tools.zip
del tools.zip
&lt;span style="color:#66d9ef">for&lt;/span> /r %%x in &lt;span style="color:#f92672">(&lt;/span>*.pack&lt;span style="color:#f92672">)&lt;/span> &lt;span style="color:#66d9ef">do&lt;/span> call :unpack2000 &lt;span style="color:#e6db74">&amp;#34;%%x&amp;#34;&lt;/span>
cd %CWD%
goto end
:unpack2000
%DEST%&lt;span style="color:#ae81ff">\b&lt;/span>in&lt;span style="color:#ae81ff">\u&lt;/span>npack200 -r %1 &lt;span style="color:#e6db74">&amp;#34;%~dpn1.jar&amp;#34;&lt;/span>
goto:eof
:end
echo Extracted %FILE% to %DEST%
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>