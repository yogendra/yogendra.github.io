<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>s2 on Yogendra Rampuria</title><link>https://yogendra.github.io/tags/s2/</link><description>Recent content in s2 on Yogendra Rampuria</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>Copyright © 2012–2021, Yogendra Rampuria; all rights reserved.</copyright><lastBuildDate>Mon, 02 Jan 2012 00:59:22 +0000</lastBuildDate><atom:link href="https://yogendra.github.io/tags/s2/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenVPN on (Rooted) SGS2</title><link>https://yogendra.github.io/2012/01/02/openvpn-on-rooted-sgs2/</link><pubDate>Mon, 02 Jan 2012 00:59:22 +0000</pubDate><guid>https://yogendra.github.io/2012/01/02/openvpn-on-rooted-sgs2/</guid><description>
&lt;p>Since mid-last year, I started using a VPN service. Good for me, my VPN provider has both &lt;a href="https://goo.gl/8LTMa">L2TP&lt;/a> and &lt;a href="https://goo.gl/jEe4k">OpenVPN&lt;/a> services. L2TP is very easy to configure on Android phones (newer ones). But I find it unstable (may be my provider&amp;rsquo;s problem). So, I prefer OpenVPN as its stable.&lt;/p>
&lt;p>&lt;img src="ovpnlogo.png" alt="type-banner" title="OpenVPN">&lt;/p>
&lt;p>I can only switch between L2TP and OpenVPN a limited number of time in a month. My provider do provide a good guide for getting OpenVPN up and running on a rooted android phone. But as we know &amp;ldquo;NO TWO DROIDS ARE SAME&amp;rdquo;, I had to improvise to get it all up. I did manage to get VPN up in a sec but requests were not getting routed via VPN.&lt;/p>
&lt;p>After all the reading around at regular places, I got this thing working. Here&amp;rsquo;s how I did it. You would require:&lt;/p>
&lt;ol>
&lt;li>tun.ko module for your kernel (Optional as SGS2 should have it build in, I am using DXKL3 firmware. Else try &lt;a href="https://goo.gl/g8Rnj">tun.ko installer&lt;/a> app), if you can not find one and don&amp;rsquo;t feel like compiling one, STOP HERE else read on.&lt;/li>
&lt;li>Rooted Phone (procedure for SGS2 &lt;a href="https://goo.gl/ehSbJ" title="here">here&lt;/a>)&lt;/li>
&lt;li>BusyBox (SGS2 w/ &lt;a href="https://goo.gl/ehSbJ">CF-Root&lt;/a> don&amp;rsquo;t have to do anything, its all burnt in, else use &lt;a href="https://goo.gl/p8Q1z">BusyBox Installer&lt;/a>)&lt;/li>
&lt;li>VPN Account with OpenVPN service (I guess you have one already else just google it)&lt;/li>
&lt;li>Application: &lt;a href="https://goo.gl/Xoecp">OpenVPN Installer&lt;/a>&lt;/li>
&lt;li>Application: &lt;a href="https://goo.gl/W1VeQ">OpenVPN Settings&lt;/a>&lt;/li>
&lt;li>A PC/Mac with &lt;a href="https://goo.gl/2qpr">Android SDK&lt;/a> (adb tool) and &lt;a href="https://goo.gl/dS1rv">Kies&lt;/a> &lt;strong>OR&lt;/strong> &lt;a href="https://goo.gl/G9Ids">Terminal Emulator&lt;/a> &lt;strong>OR&lt;/strong> &lt;a href="https://goo.gl/J7agC">SSHDroid&lt;/a> application in the phone&lt;/li>
&lt;li>30 minutes of time to make all this work.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="openvpn-install.png" alt="type-banner" title="OpenVPN Install">&lt;/p>
&lt;p>Once you have rooted your phone, install applications mentioned above as per your preference . Start &amp;ldquo;OpenVPN Installer&amp;rdquo; application and click &amp;ldquo;Install&amp;rdquo;. Choose &amp;ldquo;&lt;strong>/system/xbin&lt;/strong>&amp;rdquo; location for &amp;ldquo;&lt;strong>openvpn&lt;/strong>&amp;rdquo;. For &amp;ldquo;&lt;strong>ifconfig/route&lt;/strong>&amp;rdquo; choose &amp;ldquo;&lt;strong>/system/xbin/bb&lt;/strong>&amp;rdquo; for ifconfig/route.&lt;/p>
&lt;p>Now, this is the most tricky part. ifconfig and route commands did not get configured correctly. Then I stumbled on &lt;a href="https://goo.gl/3BgZE">this thread&lt;/a> where people were facing exact same issue. Its a huge thread, so just read post #30 and #34 or better, run following commands (in bold) on PC/Mac:&lt;/p>
&lt;ol>
&lt;li>Remount /system are R/W&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">adb remount
&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>Create a symlink of /system/xbin at /system/xbin/bb&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">adb  ls -s /system/xbin /system/xbin/bb
&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>Link toolbox (busybox) as ifconfig and route under /system/xbin/bb&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">adb shell ln -s /system/bin/toolbox /system/xbin/bb
adb shell ln -s /system/bin/toolbox /system/xbin/bb
&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>(Optional) Reboot your phone to just make /system R/O&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">adb reboot
&lt;/code>&lt;/pre>&lt;/div>&lt;p>Puh! congrats you are through with toughest part. Put your OpenVPN configuration files (keys and ovpn file) in &lt;strong>/sdcard/openvpn&lt;/strong> folder. Start &lt;strong>OpenVPN Settings&lt;/strong>, and you should see your configuration listed just under &amp;ldquo;&lt;strong>OpenVPN&lt;/strong>&amp;rdquo; option.&lt;/p>
&lt;p>Optional: Long press on your configuration name and choose &amp;ldquo;Preferences&amp;rdquo;. Put Google DNS Server &amp;ldquo;&lt;strong>8.8.8.8&lt;/strong>&amp;rdquo; in VPN DNS Server field and check &amp;ldquo;&lt;strong>Use VPN DNS Server&lt;/strong>&amp;rdquo;.&lt;/p>
&lt;p>&lt;img src="openvpn-connected.png" alt="type-banner" title="OpenVPN Successfully Connected">&lt;/p>
&lt;p>All set! Just click on &amp;ldquo;&lt;strong>OpenVPN&lt;/strong>&amp;rdquo; on main screen and then click on your configuration name (might have to click twice). You will see the progress in the status bar and final message is &amp;ldquo;&lt;strong>Connection successful&lt;/strong>&amp;rdquo;. If you pull the notification bar down, you should see upload and download speeds.&lt;/p>
&lt;p>Just go to any site (&lt;a href="https://goo.gl/auec">ip2location&lt;/a>) which tells your ip/location (I go to my VPN provider&amp;rsquo;s page) and check if all works.&lt;/p>
&lt;p>Okay I have just enough time to catch next episode of CSI:Miami on CBS. Bye.&lt;/p>
&lt;p>&lt;em>Note:&lt;/em> For other Android (2.1+) phones checkout &lt;a href="https://goo.gl/UrJMn">vpnblog&lt;/a>&lt;/p></description></item></channel></rss>